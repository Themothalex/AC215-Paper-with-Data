networks:
    default:
        name: llm-rag-network
        external: true

services:
    text_processor:
        build:
            context: ./text_processor
        container_name: text_processor
        volumes:
            - ../secrets:/secrets
            - ${PWD}/text_processor:/app
        environment:
            GOOGLE_APPLICATION_CREDENTIALS: $GOOGLE_APPLICATION_CREDENTIALS
            GCP_PROJECT: $GCP_PROJECT

    featureextracter:  # Renamed to lowercase
        build:
            context: ./featureExtracter
        container_name: featureExtracter  # Renamed to lowercase
        volumes:
            - ../secrets:/secrets
            - ${PWD}/featureExtracter:/app
        environment:
            GOOGLE_APPLICATION_CREDENTIALS: $GOOGLE_APPLICATION_CREDENTIALS
            GCP_PROJECT: $GCP_PROJECT

    embedding:
        build:
            context: ./embedding
        container_name: embedding
        volumes:
            - ../secrets:/secrets
            - ${PWD}/embedding:/app
        environment:
            GOOGLE_APPLICATION_CREDENTIALS: $GOOGLE_APPLICATION_CREDENTIALS
            GCP_PROJECT: $GCP_PROJECT
